@using Microsoft.AspNet.Identity

@if (Request.IsAuthenticated)
{
    <ul class="navbar-nav ms-auto align-items-center">

        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle d-flex align-items-center gap-2"
               href="#"
               id="userDropdown"
               role="button"
               data-bs-toggle="dropdown"
               aria-expanded="false">

                <i class="bi bi-person-circle fs-5"></i>
                <span class="d-none d-lg-inline">
                    @User.Identity.GetUserName()
                </span>
            </a>

            <ul class="dropdown-menu dropdown-menu-end shadow-sm"
                aria-labelledby="userDropdown">

                <li>
                    <a class="dropdown-item"
                       href="@Url.Action("Index", "Manage")">
                        <i class="bi bi-gear me-2"></i>
                        Mi perfil
                    </a>
                </li>

                <li><hr class="dropdown-divider"></li>

                <li>
                    @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
                    {
                        @Html.AntiForgeryToken()
                        <button type="submit"
                                class="dropdown-item text-danger">
                            <i class="bi bi-box-arrow-right me-2"></i>
                            Cerrar sesión
                        </button>
                    }
                </li>
            </ul>
        </li>

    </ul>
}
else
{
    <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item">
            <a class="nav-link" href="@Url.Action("Register", "Account")">
                <i class="bi bi-person-plus me-1"></i>
                Registrarse
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="@Url.Action("Login", "Account")">
                <i class="bi bi-box-arrow-in-right me-1"></i>
                Iniciar sesión
            </a>
        </li>
    </ul>
}
